# Z.AI 账号注册管理系统 - 使用说明

## 📋 目录
- [系统概述](#系统概述)
- [快速开始](#快速开始)
- [配置说明](#配置说明)
- [性能优化](#性能优化)
- [功能详解](#功能详解)
- [常见问题](#常见问题)

---

## 系统概述

Z.AI 账号注册管理系统是一个基于 Deno 的自动化工具，用于批量注册和管理 Z.AI 账号。

### 主要特性
- ✅ 批量自动注册账号
- ✅ 邮箱验证自动化
- ✅ APIKEY 自动获取
- ✅ 账号状态检测
- ✅ 本地 + 云端双重存储
- ✅ 实时进度监控
- ✅ 高级配置优化

---

## 快速开始

### 1. 启动服务

```bash
cd deno/zai
deno task registry
```

### 2. 访问管理界面

打开浏览器访问：`http://localhost:8001/login`

默认账号：`admin`
默认密码：`123456`

### 3. 开始注册

1. 在主界面输入注册数量（建议从 5 个开始测试）
2. 点击"开始注册"按钮
3. 实时查看注册进度和日志

---

## 配置说明

### 基础配置

| 配置项 | 默认值 | 范围 | 说明 |
|--------|--------|------|------|
| **注册数量** | 5 | 1-1000 | 单次批量注册的账号数量 |
| **并发数** | 15 | 1-100 | 同时注册的账号数，建议 10-30 |
| **账号间隔** | 2000ms | 500-10000ms | 每批账号之间的间隔时间 |
| **邮件等待超时** | 300秒 | 60-600秒 | 等待验证邮件的最长时间 |
| **邮件轮询间隔** | 5秒 | 1-30秒 | 检查邮箱的间隔时间 |

### 高级配置

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| **快速模式** | 关闭 | 注册时跳过 APIKEY 获取，稍后批量获取 |
| **API 重试次数** | 3 | API 请求失败后的重试次数 |
| **HTTP 超时** | 30秒 | HTTP 请求的超时时间 |
| **批量保存大小** | 10 | 每批保存到 KV 的账号数量 |


### 配置建议

#### 🐌 稳定保守配置（推荐新手）
```
并发数：10
账号间隔：3000ms
邮件轮询间隔：5秒
快速模式：关闭
```
- **特点**：稳定性最高，不易被封
- **速度**：每个账号约 6-8 秒
- **适用**：初次使用、测试环境

#### ⚖️ 平衡配置（推荐）
```
并发数：15
账号间隔：2000ms
邮件轮询间隔：5秒
快速模式：关闭
```
- **特点**：速度与稳定性平衡
- **速度**：每个账号约 5-7 秒
- **适用**：日常使用、中等批量

#### 🚀 高速配置（快速模式）
```
并发数：30
账号间隔：1000ms
邮件轮询间隔：3秒
快速模式：开启
```
- **特点**：速度最快，需要后续批量获取 APIKEY
- **速度**：每个账号约 2-4 秒
- **适用**：大批量注册（100+ 账号）

---

## 性能优化

### 🚀 快速模式详解

**什么是快速模式？**

快速模式将注册流程分为两个阶段：
1. **快速注册阶段**：只完成账号注册和邮箱验证，获取 Token
2. **批量获取阶段**：注册完成后，统一批量获取所有账号的 APIKEY

**性能对比**

| 模式 | 单账号耗时 | 100 账号总时间 | 说明 |
|------|-----------|---------------|------|
| 普通模式 | ~6 秒 | ~40 分钟（15并发） | 完整流程，立即可用 |
| 快速模式 | ~3 秒 | **~20 分钟（15并发）** | 分两阶段，速度提升 50% |

**使用流程**

1. 在"高级设置"中勾选 **🚀 快速模式**
2. 保存设置
3. 开始批量注册（例如 100 个账号）
4. 等待注册完成（约 20 分钟）
5. 点击"批量获取 APIKEY"按钮（约 5 分钟）
6. 完成！总耗时约 25 分钟（普通模式需 40 分钟）

**注意事项**
- ⚠️ 快速模式注册的账号会显示"稍后获取 KEY"
- ⚠️ 必须手动点击"批量获取 APIKEY"按钮完成后续步骤
- ✅ 适合大批量注册场景（50+ 账号）

---

## 功能详解

### 1. 批量注册

**流程说明**
1. 生成随机邮箱和密码
2. 调用 Z.AI 注册 API
3. 等待验证邮件（临时邮箱服务）
4. 提取验证链接并完成验证
5. 获取用户 Token
6. [普通模式] 登录 API → 创建 APIKEY → 保存
7. [快速模式] 保存（无 KEY）→ 结束

### 2. 账号管理

#### 筛选功能
- **全部账号**：显示所有账号
- **仅本地**：仅显示本地 IndexedDB 存储的账号
- **有 APIKEY**：筛选已获取 APIKEY 的账号
- **无 APIKEY**：筛选未获取 APIKEY 的账号

#### 批量操作
- **批量选择**：勾选账号进行批量操作
- **批量删除**：删除选中的账号（并发执行）
- **批量获取 APIKEY**：为选中账号批量获取 APIKEY
- **批量检测**：检测选中账号的存活状态

---

## 常见问题

### Q1: 注册一直失败怎么办？

**可能原因**
1. 并发数过高导致限流
2. IP 被临时封禁
3. 邮箱服务不稳定

**解决方案**
1. 降低并发数（10 以下）
2. 增加账号间隔（3000ms 以上）
3. 等待 10-30 分钟后重试

### Q2: 快速模式和普通模式如何选择？

| 场景 | 推荐模式 | 理由 |
|------|---------|------|
| 注册 < 20 个账号 | 普通模式 | 一次性完成，省事 |
| 注册 50-100 个账号 | 快速模式 | 速度提升明显（节省 15-20 分钟） |
| 注册 100+ 个账号 | 快速模式 | 大幅提速（节省 30+ 分钟） |
| 需要立即使用 | 普通模式 | 获取完整 APIKEY |

### Q3: KV 配额用完了？

**查看配额使用**
1. 展开"📊 KV 使用统计"面板
2. 查看今日写入/读取百分比
3. 超过 80% 会显示警告

**限制说明**
- Deno Deploy 免费版：10k 写入/天，1M 读取/天
- 系统已自动优化，正常使用不会超限

---

## 高级技巧

### 最大化注册速度

```
步骤：
1. 开启快速模式
2. 设置并发数：50
3. 设置账号间隔：500ms
4. 批量注册 100 个账号
5. 等待完成后批量获取 APIKEY

预期：100 个账号约 10-15 分钟完成
```

⚠️ **注意**：激进配置可能导致 IP 被封，建议测试后使用

---

**文档版本**：v2.2.0
**最后更新**：2025-01-10
